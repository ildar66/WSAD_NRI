/*
Copyright (c) Nebiru Software 2001, 2005
  Compressed and obfuscated by JSCruncher Pro.
  http://domapi.com/jscruncherpro
*/
domapi.registerComponent("listbox");domapi.Listbox=function(i2T25){return domapi.comps.listbox.constructor(i2T25)};domapi.comps.listbox.constructor=function(i2T25){if(i2T25.doAllowDrag)domapi.assertUnit("customdrag");var x3A00=domapi.Component(i2T25,"listbox");try{x3A00.onchange=function(i){};x3A00.onbeforechange=function(i){return true};x3A00.setOverflow("auto");x3A00.tng=document.createElement("DIV");x3A00.appendChild(x3A00.tng);domapi.disallowSelect(x3A00);x3A00.items=x3A00.tng.childNodes;x3A00.selected=[];x3A00.itemIndex=-1;x3A00.tng.className="DA_LISTBOX_INNER";x3A00.style.cursor="default";var p=domapi.mJ00.listbox;domapi.addEvent(x3A00,"mouseover",p.T3S);domapi.addEvent(x3A00,"mouseout",p.C06);domapi.addEvent(x3A00,"mousedown",p.Sw_7);domapi.addEvent(x3A00,"mouseup",p.lh4);domapi.addEvent(x3A00,"click",p.e2xtH);x3A00.onscroll=p.qw33W;if(x3A00.doAllowDrag)x3A00.turnOnCustomDrag({});domapi.hl1(x3A00);domapi.addEvent(domapi.isIE?x3A00:x3A00.r40s5,"keydown",p.i$144);return x3A00}finally{x3A00=null}};domapi.comps.listbox.Q43hR=function(){this.T4GB_()};domapi.comps.listbox.Gk8HS=function(){this.onchange=null;this.onbeforechange=null;this.tng=null;this.items=null};domapi.comps.listbox.T4GB_=function(){var t=domapi.theme;var __4=t.fonts;var s=this.style;var i=this.items;var b=this.doBorder?t.border.width:0;this.setB(b);this.setColor(__4.window.color);this.setBgColor(this.doBGFill?__4.window.bgcolor:"transparent");s.borderStyle=this.doBorder?t.border.solid:"none";s.borderColor=t.border.getInset();for(var a=0;a<i.length;a++)this.drawItem(i[a]);domapi.css.removeClass(this,"DA_LINED");domapi.css.removeClass(this,"DA_LEDGER");if(this.doHLines)domapi.css.addClass(this,"DA_LINED");if(this.doLedger)domapi.css.addClass(this,"DA_LEDGER");t=null;s=null;i=null};domapi.comps.listbox.MR9=function(){if(this.doAutoWidth&&!this.h982u){var i,w,g604,__4;var b=this.getB();var p=this.getP();w=this.minWidth;__4=domapi.theme.fonts.buttonface.asString();for(i=0;i<this.items.length;i++){g604=domapi.textWidth(this.items[i].innerHTML,__4);if(g604>w)w=g604}this.setW(w+domapi.l3i_1()*2+b[1]*4+p[1]*4,true);domapi.mJ00.listbox.Dv3$.apply(this)}};domapi.comps.listbox.drawItem=function(item){var iv3U="";if(item.selected&&this.doShowSelection)iv3U="DA_SELECTION";else if(this.doLedger)iv3U=(domapi.getNodeIndex(item)%2)==0?"LEDGER1":"LEDGER2";if(item.className!=iv3U)item.className=iv3U};domapi.comps.listbox.addItem=function(i2T25){var x3A00=document.createElement("DIV");var s=x3A00.style;var i=this.items;var t=domapi.theme;if(!i2T25["text"])i2T25["text" ]=i2T25["value"];if(!i2T25["value"])i2T25["value"]=i2T25["text"];x3A00.innerHTML=i2T25["text"];x3A00.m2rC=domapi.rVal(i2T25["fn"],null);x3A00.selected=false;x3A00.DA_TYPE="LISTBOXITEM";x3A00.className="DA_LISTITEM";x3A00.value=i2T25["value"];domapi.disallowSelect(x3A00);this.tng.appendChild(x3A00);if(i.length==1&&!this.doAllowNoSelect)this.selectItem(0,true);if(!this.h982u){this.drawItem(x3A00);this.layout()}if(!this.h982u)domapi.mJ00.listbox.Dv3$.apply(this);x3A00=null;s=null;t=null;i=null};domapi.comps.listbox.insertItem=function(i2T25){var __4=i2T25["fromItem"];var t=i2T25["toItem" ];var w="afterEnd";var p=i2T25["sourceListbox"];try{if(!t)t=this;if(i2T25["insertAbove"]||i2T25["insertBelow"]){var i=domapi.getNodeIndex(i2T25["toItem"])}if(!__4||!t||!p){throw new Error('Error in insertItem, one or more parameters is invalid.\n'+'fromItem      : '+__4+'\n'+'toItem        : '+t+'\n'+'sourceListbox : '+p);return false}var d1_K=this.items.length;if(i2T25["insertAbove"])w="beforeBegin";if(i2T25["insertBelow"])w="afterEnd";var _8xC=p.deleteItem(domapi.getNodeIndex(__4));if(t.DA_TYPE==this.DA_TYPE)this.tng.appendChild(_8xC);else t.insertAdjacentElement(w,_8xC);if((p==this&&d1_K!=this.items.length)||(p!=this&&d1_K>=this.items.length))throw new Error('Error in insertItem, failed to insert into items array.\n'+'fromItem      : '+__4+'\n'+'toItem        : '+t+'\n'+'sourceListbox : '+p+'\n'+'i             : '+i+'\n'+'checksum      : '+d1_K+'\n'+'items.length  : '+this.items.length);if(!this.h982u)domapi.mJ00.listbox.Dv3$.apply(this);this.draw();if(p!=this)p.draw();return _8xC}finally{__4=null;t=null;w=null;p=null;_8xC=null}};domapi.comps.listbox.tN7=function(_VE72){_VE72.style.borderWidth="0px 0px 1px 0px"};domapi.comps.listbox.Vo4=function(_VE72){_VE72.style.borderWidth="1px 0px 0px 0px"};domapi.comps.listbox.findItem=function(s,ignoreCase){var SWMm3="";if(ignoreCase)s=s.toLowerCase();for(var a=0;a<this.items.length;a++){SWMm3=this.items[a].innerHTML;if(ignoreCase)SWMm3=SWMm3.toLowerCase();if(s==SWMm3)return this.items[a]}return null};domapi.comps.listbox.setItem=function(i,i2T25){if(i>=this.items.length)return;with(this.items[i]){innerHTML=i2T25["text"];m2rC=domapi.rVal(i2T25["fn"],null);value=i2T25["value"]}if(!this.h982u)this.layout()};domapi.comps.listbox.sortItems=function(dir,type){var i=this.items;domapi.assertUnit("nodesort");domapi.nodeSort({P1O:i,direction:dir,type:type});for(var a=0;a<i.length;a++)this.drawItem(i[a]);domapi.mJ00.listbox.Dv3$.apply(this);i=null};domapi.comps.listbox.deleteItem=function(i){if(i>=this.items.length)return;var x3A00=this.items[i];var s=this.selected;try{for(var a=s.length-1;a>=0;a--)if(s[a]==x3A00)s.deleteItem(a);x3A00.parentNode.removeChild(x3A00);if(!this.h982u){this.layout()}domapi.mJ00.listbox.Dv3$.apply(this);return x3A00}finally{s=null;x3A00=null}};domapi.comps.listbox.clearItems=function(){this.beginUpdate();try{this.tng.innerHTML="";this.selected=[]}finally{this.endUpdate();this.setValue()}domapi.mJ00.listbox.Dv3$.apply(this)};domapi.comps.listbox.selectItemByValue=function(i){for(var a=this.items.length-1;a>-1;a--)if(this.items[a].value==i)this.selectItem(a,true);return true};domapi.comps.listbox.selectItem=function(index,b){if(index<0||index>=this.items.length)return;if(domapi.trace)dump(this.toString()+'.listbox.selectItem()<--');var k$Vu=this.selected.indexOf(index);if(b&&k$Vu<0){if(!this.onbeforechange(this.items[index]))return;this.items[index].selected=true;if(!this.h982u)this.drawItem(this.items[index]);this.selected.push(index);this.itemIndex=index;if(!this.h982u){var t=this.items[index].offsetTop;var tt=this.scrollTop;var h=this.offsetHeight-this.items[index].offsetHeight;if(t<tt)this.scrollTop=t;if(t>tt+h)this.scrollTop=t-h;this.setValue();this.onchange(index);if(this.items[index].m2rC){if(typeof this.items[index].m2rC=="function")this.items[index].m2rC(index);else eval(this.items[index].m2rC)}}}else if(!b&&k$Vu>-1){this.items[index].selected=false;if(!this.h982u)this.drawItem(this.items[index]);this.selected.deleteItem(k$Vu)}if(domapi.trace)dump(this.toString()+'.listbox.selectItem()-->')};domapi.comps.listbox.setValue=function(E0E){if(domapi.trace)dump(this.toString()+'.listbox.setValue()<--');E0E=this.getValue();this.value=E0E;domapi.RB78_(this.O$n,String(E0E));if(domapi.trace)dump(this.toString()+'.listbox.setValue()-->')};domapi.comps.listbox.selectAll=function(){this.beginUpdate();try{for(var i=0;i<this.items.length;i++)this.selectItem(i,true)}finally{this.endUpdate();this.setValue()}};domapi.comps.listbox.selectNone=function(){if(domapi.trace)dump(this.toString()+'.listbox.selectNone()<--');try{for(var i=this.selected.length-1;i>=0;i--)this.selectItem(this.selected[i],false);this.setValue()}finally{}if(domapi.trace)dump(this.toString()+'.listbox.selectNone()-->')};domapi.comps.listbox.delimitedText=function(s,del){del=domapi.rVal(del,",");this.clearItems();this.beginUpdate();var ALlX7=s.split(del);for(var a=0;a<ALlX7.length;a++)this.addItem({text:ALlX7[a]});this.endUpdate();domapi.mJ00.listbox.Dv3$.apply(this)};domapi.comps.listbox.Se1=function(ocK){if(domapi.trace)dump(this.toString()+'.listbox._getValue()');var k$Vu,i;var t="";var s=this.selected;try{for(i=0;i<s.length;i++){k$Vu=s[i];if(k$Vu>-1&&k$Vu<this.items.length){if(i>0)t+=ocK;t+=this.items[k$Vu].value}}return t}finally{k$Vu=null;t=null;s=null}};domapi.mJ00.listbox.Dv3$=function(){this.selected=[];for(var i=0;i<this.items.length;i++)if(this.items[i].selected)this.selected.push(i)};domapi.mJ00.listbox.T3S=function(E){var r=domapi.findTarget(E,"LISTBOX");var t=domapi.theme;var __4=t.fonts;try{if(!r.doRollover||!r.enabled||(domapi.customDrag&&domapi.customDrag.inDrag))return;var x3A00=domapi.findTarget(E,"LISTBOXITEM");if(!x3A00||x3A00==r)return;if(x3A00.selected&&r.doShowSelection)return;x3A00.className="DA_HIGHLIGHT"}finally{r=null;x3A00=null;__4=null;t=null}};domapi.mJ00.listbox.C06=function(E){var r=domapi.findTarget(E,"LISTBOX");var t=domapi.theme;var __4=t.fonts;try{if(!r.enabled||!r.doRollover||(domapi.customDrag&&domapi.customDrag.inDrag))return;var x3A00=domapi.findTarget(E,"LISTBOXITEM");if(!x3A00||x3A00==r)return;if(r.doDepress)r.tN7(x3A00);if(x3A00.selected&&r.doShowSelection)return;r.drawItem(x3A00)}finally{r=null;x3A00=null;__4=null;t=null}};domapi.mJ00.listbox.Sw_7=function(E){var r=domapi.findTarget(E,"LISTBOX");try{if(!r.enabled||!r.doDepress||(domapi.customDrag&&domapi.customDrag.inDrag))return;var x3A00=domapi.findTarget(E,"LISTBOXITEM");if(!x3A00||x3A00==r)return;r.Vo4(x3A00)}finally{r=null;x3A00=null}};domapi.mJ00.listbox.lh4=function(E){var r=domapi.findTarget(E,"LISTBOX");try{if(!r.enabled)return;var x3A00=domapi.findTarget(E,"LISTBOXITEM");if(!x3A00||x3A00==r)return;if(r.doDepress)r.tN7(x3A00);if(domapi.isGecko)E.preventDefault();return false}finally{x3A00=null;r=null}};domapi.mJ00.listbox.e2xtH=function(E){var r=domapi.findTarget(E,"LISTBOX");var x3A00=domapi.findTarget(E,"LISTBOXITEM");try{if(!x3A00||x3A00==r||!r.enabled||(domapi.customDrag&&domapi.customDrag.inDrag))return;var shiftKey=domapi.isIE?event.shiftKey:E.shiftKey;var ctrlKey=domapi.isIE?event.ctrlKey:E.ctrlKey;var i=domapi.getNodeIndex(x3A00);if(r.onbeforechange)if(!x3A00.selected&&!r.onbeforechange(x3A00))return;if((!(shiftKey||ctrlKey)&&r.doMultiSelect)||!r.doMultiSelect)r.selectNone();var U$c2=r.itemIndex;r.itemIndex=i;if((ctrlKey&&x3A00.selected)&&(r.doAllowNoSelection||r.selected.length>1)){r.selectItem(i,false);return}if(shiftKey&&r.doMultiSelect&&i>-1){var _b1tk,P68na;if(U$c2<i){_b1tk=U$c2;P68na=i}else{_b1tk=i;P68na=U$c2}for(var k$Vu=_b1tk;k$Vu<=P68na;k$Vu++)if(k$Vu!=i)r.selectItem(k$Vu,true)}r.selectItem(i,true)}finally{r=null;x3A00=null}};domapi.mJ00.listbox.qw33W=function(E){var r=domapi.findTarget(E,"LISTBOX");r=null};domapi.mJ00.listbox.i$144=function(E){if(!E)E=window.event;var bM2=domapi.isIE?E.keyCode:E.which;if(domapi.trace)dump('domapi._private.listbox.dokeydown<-- '+bM2);var x3A00=domapi.isGecko?E.target:E.srcElement;var r=x3A00.o55Q;var i$4_=false;var shiftKey=E.shiftKey;var ctrlKey=E.ctrlKey;try{if(!r.enabled)return;if(!r._832W){if(bM2==33)r.scrollTop-=r.offsetHeight;else if(bM2==34)r.scrollTop+=r.offsetHeight;else if(bM2==35&&ctrlKey){r.scrollTop=r.tng.offsetHeight;r.selectNone();r.itemIndex=r.items.length-1;r.selectItem(r.itemIndex,true)}else if(bM2==36&&ctrlKey){r.scrollTop=0;r.selectNone();r.p96yd=0;r.selectItem(0,true)}else if(bM2==38&&r.itemIndex>0){if((!(shiftKey||ctrlKey)&&r.doMultiSelect)||!r.doMultiSelect)if(r.onbeforechange&&r.onbeforechange(r.items[r.itemIndex-1]))r.selectNone();r.itemIndex--;r.selectItem(r.itemIndex,true);i$4_=true}else if(bM2==40&&r.itemIndex<r.items.length-1){if((!(shiftKey||ctrlKey)&&r.doMultiSelect)||!r.doMultiSelect)if(r.onbeforechange&&r.onbeforechange(r.items[r.itemIndex+1]))r.selectNone();r.itemIndex++;r.selectItem(r.itemIndex,true);i$4_=true}else if(bM2==65&&ctrlKey&&r.doMultiSelect){r.selectAll();i$4_=true}else if(bM2==27){r.selectNone();r.selectItem(r.itemIndex,true)}else if(bM2>=48){var SWMm3="";var m342G=false;var $qv=false;var V598=0;var Dk7=0;var Pu3S=String.fromCharCode(bM2).toLowerCase();for(var a=0;a<r.items.length;a++)if(r.items[a].selected){V598=a;break}if(!shiftKey){for(var a=V598;a<r.items.length;a++){SWMm3=r.items[a].innerHTML.toLowerCase();if(Pu3S==SWMm3.substring(0,1)&&(r.onbeforechange&&r.onbeforechange(r.items[a]))){if(r.items[a].selected){Dk7=a;m342G=true;continue}else{if(m342G)r.selectItem(Dk7,false);else r.selectNone();r.selectItem(a,true);$qv=true;break}}}if(!$qv)for(var a=0;a<V598;a++){SWMm3=r.items[a].innerHTML.toLowerCase();if(Pu3S==SWMm3.substring(0,1)){r.selectNone();r.selectItem(a,true);break}}}else if(shiftKey&&r.doMultiSelect){for(var a=V598+1;a<r.items.length;a++){SWMm3=r.items[a].innerHTML.toLowerCase();if(Pu3S==SWMm3.substring(0,1)){Dk7=a;m342G=true;break}}if(!m342G){for(var a=0;a<V598;a++){SWMm3=r.items[a].innerHTML.toLowerCase();if(Pu3S==SWMm3.substring(0,1)){if(r.items[a].selected){Dk7=a;m342G=true;break}}}}if(m342G){r.selectNone();for(var a=V598;a<=Dk7;a++)r.selectItem(a,true)}}}}if(i$4_){if(E&&E.preventDefault)E.preventDefault();return false}}finally{r=null;x3A00=null}};domapi.comps.listbox.ondragallow=function(i2T25){var x3A00=domapi.findParent(domapi.customDrag.elm,"LISTBOXITEM");var p=domapi.customDrag.container;var o7b=x3A00&&(p!=x3A00)&&p.doAllowDrag;x3A00=null;r=null;return o7b};domapi.comps.listbox.ondragstart=function(i2T25){var p8Td=domapi.customDrag;p8Td.elm=domapi.findParent(p8Td.elm,"LISTBOXITEM");if(!p8Td.elm)p8Td.container.cancelCustomDrag();p8Td=null};domapi.comps.listbox.onallowinsertabove=function(i2T25){var x3A00=domapi.findParent(i2T25["over"],"LISTBOXITEM");try{return(x3A00)}finally{x3A00=null}};domapi.comps.listbox.onallowinsertbelow=function(i2T25){var x3A00=domapi.findParent(i2T25["over"],"LISTBOXITEM");try{return(x3A00)}finally{x3A00=null}};domapi.comps.listbox.loadFromJson=function(R4C0){this.$tX(R4C0)};domapi.comps.listbox.$tX=function(R4C0){var i,k$Vu,L4k17;this.beginUpdate();try{for(i in R4C0){if(i=="items"){L4k17=R4C0[i];for(k$Vu=0;k$Vu<L4k17.length;k$Vu++)this.addItem(L4k17[k$Vu])}else this[i]=R4C0[i]}}finally{this.endUpdate()}L4k17=null};domapi.comps.listbox.loadFromJsonUrl=function(url){this.k45H(url)};domapi.comps.listbox.k45H=function(url){if(domapi.trace)dump('_loadFromJsonUrl("'+url+'")');var k$Vu=domapi.urlToJson(url);try{this.loadFromJson(k$Vu)}finally{k$Vu=null}};