/*
Copyright (c) Nebiru Software 2001, 2005
  Compressed and obfuscated by JSCruncher Pro.
  http://domapi.com/jscruncherpro
*/
domapi.loadUnit("dropdown");domapi.loadUnit("listbox");domapi.registerComponent("combobox");domapi.Combobox=function(i2T25){return domapi.comps.combobox.constructor(i2T25)};domapi.comps.combobox.constructor=function(i2T25){var x3A00=domapi.Component(i2T25,"combobox",false);try{x3A00.T5$=domapi.comps.combobox.T5$;x3A00.T5$(i2T25);domapi.hl1(x3A00);domapi.mJ00.dropdown.X53(x3A00);x3A00.Q43hR();return x3A00}finally{x3A00=null}};domapi.comps.combobox.T5$=function(i2T25){var w=i2T25["w"];var h=i2T25["h"];domapi.IsNVS(this,"dropdown");this.T5$();domapi.IsNVS(this,"combobox");this.value=domapi.rVal(i2T25["value"]);this.w7U1b.value=this.value;this.dropDown=domapi.Listbox({parent:this.parent,x:0,y:h,w:null,h:domapi.rInt(i2T25["dropdownH" ],100),doAutoWidth:domapi.rBool(i2T25["doAutoWidth"],true),minWidth:domapi.rInt(i2T25["minWidth" ],50),doAllowNoSelect:true,doIframeShield:true});this.dropDown.doHLines=i2T25["doLines"];this.dropDown.hide=function(){this.style.visibility="hidden";this.setX(-500)};var p=domapi.mJ00.combobox;this.dropDown.onbeforechange=p.o9063;this.dropDown.onchange=p.g32;domapi.addEvent(this,"keydown",p.i$144);domapi.addEvent(this,"click",p.e2xtH);domapi.addEvent(this.w7U1b,"change",p.KGd3);this.dropDown.parent=this;this.dropDown.hide();this.dropDown.allowNoSelect=true;this.setDoAutoComplete(this.doAutoComplete)};domapi.comps.combobox.Q43hR=function(){this.wv6();this._F9Rk()};domapi.comps.combobox.Gk8HS=function(){this.dropDown.hide=null;this.dropDown.onbeforechange=null;this.dropDown.onchange=null;this.dropDown.parent=null;this.oJj()};domapi.comps.combobox._F9Rk=function(){this.dropDown.draw()};domapi.comps.combobox.MR9=function(w,h){var x3A00=this.w7U1b;try{this.F32(w,h);h=domapi.theme.skin.metrics.dropdown.h;x3A00.setSize(w,h)}finally{x3A00=null}};domapi.comps.combobox.setEnabled=function(b){this.enabled=b;this.dropBtn.enabled=b;this.dropDown.enabled=b;this.w7U1b.disabled=!b;this.dropBtn.setEnabled(b)};domapi.comps.combobox.setDoRollover=function(b){this.doRollover=b;this.dropBtn.doRollover=b;this.dropDown.doRollover=b};domapi.comps.combobox.setDoAllowEdit=function(b){if(domapi.isGecko){if(b)this.w7U1b.removeAttribute("readonly");else this.w7U1b.setAttribute("readonly","readonly")}else{if(b)this.w7U1b.onfocus=null;else this.w7U1b.onfocus=function(){this.blur()}}if(!b&&domapi.isNil(this.value)&&(this.dropDown.items.length>0)){this.dropDown.selectItem(0,true);this.close()}this.doAllowEdit=b};domapi.comps.combobox.setDoAutoComplete=function(b){domapi.assertUnit("form");this.doAutoComplete=b;if(b)domapi.form.autocompleteOn(this.w7U1b,[]);else domapi.form.autocompleteOff(this.w7U1b,[]);this.w7U1b.oncomplete=domapi.mJ00.combobox.oncomplete};domapi.comps.combobox.addItem=function(t,E0E){if(typeof E0E=="undefined")E0E=t;this.dropDown.addItem({text:t,value:E0E})};domapi.comps.combobox.selectItem=function(i){if(domapi.trace)dump(this.toString()+'.combobox.selectItem()<--');var p8Td=this.dropDown;try{i=domapi.rInt(i);if(i<0||i>=p8Td.items.length){if(domapi.trace)dump(this.toString()+'.combobox.selectItem() EARLY-->');return}p8Td.selectItem(i,true);if(domapi.trace)dump(this.toString()+'.combobox.selectItem()-->')}finally{p8Td=null}};domapi.comps.combobox.selectItemByValue=function(i){this.dropDown.selectNone();this.dropDown.selectItemByValue(i,true)};domapi.comps.combobox.setValue=function(E0E){if(domapi.trace)dump(this.toString()+'.combobox.setValue()<--');this.value=E0E;domapi.RB78_(this.O$n,String(E0E));if(this.onchange)this.onchange(this.value);if(domapi.trace)dump(this.toString()+'.combobox.setValue()-->')};domapi.comps.combobox.addItems=function(s,hint){var h043Q=s.constructor==Array;var p79q=s.constructor==String;var $g1=h043Q&&(s.length>0)&&(s[0].constructor==String);if(p79q){hint=domapi.rVal(hint,",");this.dropDown.delimitedText(s,hint);if(this.doAutoComplete)this.w7U1b.e4LV=s.split(hint).sort()}else{var J96f6=this.doAutoComplete?this.w7U1b.e4LV:false;for(var i=0;i<s.length;i++){if($g1)this.addItem(s[i]);else this.addItem(s[i].text,s[i].value);if(J96f6)if($g1)J96f6.push(s[i]);else J96f6.push(s[i].text)}if(J96f6){J96f6.sort();J96f6=null}}};domapi.comps.combobox.clearItems=function(){this.dropDown.clearItems();if(this.doAutoComplete)this.w7U1b.e4LV=[]};domapi.mJ00.combobox.o9063=function(E0E){return this.parent.onbeforechange(E0E?E0E.value:"")};domapi.mJ00.combobox.g32=function(i){var r=this.parent;try{if(!r)return;i=domapi.rInt(i,-1);if(i==-1){r=null;return}var E0E=i>-1?this.items[i].innerHTML:"";var pG32s=i>-1?this.items[i].value:"";if(typeof r.onbeforechange!="function")return;if(!r.onbeforechange(pG32s)){r=null;return}if(domapi.trace)dump(this.toString()+'.combobox.dodropdownchange()<--');r.setValue(pG32s);r.w7U1b.value=E0E;if(r.autoClose&&this.visible){this.hide();r.opened=false;r.dropBtn.title=domapi.getString("DROPDOWN_OPEN")}if(r.doAllowEdit){r.N80d=true;r.w7U1b.select();r.w7U1b.focus();r.N80d=false}if(domapi.trace)dump(this.toString()+'.combobox.dodropdownchange()-->')}finally{r=null}};domapi.mJ00.combobox.KGd3=function(E){var x3A00=domapi.findTarget(E,"INPUT");try{domapi.preventBubble(E);if(!x3A00)return;var p=x3A00.parentNode;if(p.N80d)return;if(!p.onbeforechange(x3A00.value)){x3A00.value=p.value;return}p.setValue(x3A00.value)}finally{x3A00=null;p=null}};domapi.mJ00.combobox.e2xtH=function(E){var r=domapi.findTarget(E,"COMBOBOX");try{if(!r||!r.enabled)return;var x3A00=domapi.findTarget(E,"INPUT");if(x3A00&&!r.doAllowEdit)r.open();if(r.focus)r.focus()}finally{x3A00=null;r=null}};domapi.mJ00.combobox.i$144=function(E){if(!E)E=window.event;var bM2=domapi.isIE?E.keyCode:E.which;var altKey=E.altKey;var ctrlKey=E.ctrlKey;if(domapi.trace)dump('domapi._private.combobox.dokeydown<-- '+bM2+" alt: "+altKey);var r=domapi.findTarget(E,"COMBOBOX");try{if(!r||!r.enabled)return;var p8Td=r.dropDown;if(r.opened&&!altKey&&(bM2==38||bM2==40)){var XH7k={};if(domapi.isIE){XH7k.srcElement=r.dropDown;XH7k.keyCode=bM2}else{XH7k.target=r.dropDown.r40s5;XH7k.which=bM2}domapi.mJ00.listbox.i$144(XH7k);r.w7U1b.focus()}else if(bM2==40&&altKey){if(r.opened)r.close();else r.open()}else if(bM2==13){if(r.opened)r.close()}else if(r.doAutoComplete&&!(ctrlKey||altKey)&&!domapi.form.LB3(bM2)){}if(bM2==38||bM2==40){if(E&&E.preventDefault)E.preventDefault();return false}}finally{r=null;p8Td=null}};domapi.mJ00.combobox.oncomplete=function(i){var r=domapi.findParent(this,"COMBOBOX");if(1>=0){r.setValue(this.e4LV[i]);if(r.opened){r.dropDown.onchange=function(i){};r.selectItemByValue(this.e4LV[i]);r.dropDown.onchange=domapi.mJ00.combobox.g32}}if(r.oncomplete)r.oncomplete(i)};