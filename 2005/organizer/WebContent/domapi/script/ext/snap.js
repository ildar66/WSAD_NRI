/*
Copyright (c) Nebiru Software 2001, 2005
  Compressed and obfuscated by JSCruncher Pro.
  http://domapi.com/jscruncherpro
*/
domapi.loadUnit("collision");domapi.loadUnit("groups");domapi.useElmHooks=true;domapi.snap=new Object();domapi.snap.grid=25;domapi.snap.on=function(){domapi.regHook('moveTo',domapi.snap.c52)};domapi.snap.off=function(){domapi.unRegHook('moveTo',domapi.snap.c52)};domapi.snap.setGrid=function(k1_1){domapi.snap.grid=k1_1};domapi.snap.c52=function(x3A00){if(domapi.snap.E$9(x3A00))return;if(x3A00.l7952)x3A00.l7952=false;else{var x=x3A00.getX()-x3A00.getX()%domapi.snap.grid;var y=x3A00.getY()-x3A00.getY()%domapi.snap.grid;x3A00.setX(x);x3A00.setY(y)}};domapi.snap.collOn=function(){domapi.regHook('moveTo',domapi.snap.Q5eB)};domapi.snap.collOff=function(){domapi.unRegHook('moveTo',domapi.snap.Q5eB)};domapi.snap.Q5eB=function(x3A00){if(domapi.snap.E$9(x3A00))return;var a=x3A00.hasHit('all');if(!a.length)return;if(a[0][0]){domapi.snap.sAGM(x3A00,a[0][0]);x3A00.l7952=true}};domapi.snap.E$9=function(x3A00){if(domapi.unitLoaded("window"))if(domapi.findParent(x3A00,"WINDOW"))return true;return false};domapi.snap.sAGM=function(s,t){var a=domapi.snap;var j94,B84,_73O0,h$6w,r36cT,OXMO,t69,eg13u;j94=s.getX();B84=s.getY();_73O0=s.getW();h$6w=s.getH();r36cT=t.getX();OXMO=t.getY();t69=t.getW();eg13u=t.getH();var pY2=j94+(_73O0/2);var m4$=B84+(h$6w/2);var T37=false;if(a.m66(t,pY2,m4$))T37=true;if(a.m66(t,j94,B84)&&a.m66(t,j94,B84+h$6w)&&!(a.m66(t,j94+_73O0,B84))&&!(a.m66(t,j94+_73O0,B84+h$6w)))domapi.snap.q33(t,s);else if(!(a.m66(t,j94,B84))&&!(a.m66(t,j94,B84+h$6w))&&(a.m66(t,j94+_73O0,B84))&&(a.m66(t,j94+_73O0,B84+h$6w)))domapi.snap.$hc(t,s);else if((a.m66(t,j94,B84))&&!(a.m66(t,j94,B84+h$6w))&&(a.m66(t,j94+_73O0,B84))&&!(a.m66(t,j94+_73O0,B84+h$6w)))domapi.snap.R15(t,s);else if(!(a.m66(t,j94,B84))&&(a.m66(t,j94,B84+h$6w))&&!(a.m66(t,j94+_73O0,B84))&&(a.m66(t,j94+_73O0,B84+h$6w)))domapi.snap.$q452(t,s);else if(pY2<=(r36cT+t69/2)&&m4$<=(OXMO+eg13u/2)){if(T37)domapi.snap.$q452(t,s);else domapi.snap.$hc(t,s)}else if(pY2<=(r36cT+t69/2)&&m4$>=(OXMO+eg13u/2)){if(T37)domapi.snap.R15(t,s);else domapi.snap.$hc(t,s)}else if(pY2>=(r36cT+t69/2)&&m4$<=(OXMO+eg13u/2)){if(T37)domapi.snap.$q452(t,s);else domapi.snap.q33(t,s)}else if(pY2>=(r36cT+t69/2)&&m4$>=(OXMO+eg13u/2)){if(T37)domapi.snap.R15(t,s);else domapi.snap.q33(t,s)}};domapi.snap.m66=function(s,x,y){if((x>=s.getX()&&x<=(s.getX()+s.getW()))&&(y>=s.getY()&&y<=(s.getY()+s.getH())))return true;else return false};domapi.snap.$q452=function($6ep,om3){var w502E=$6ep.getY();om3.setY(w502E-om3.getH())};domapi.snap.R15=function($6ep,om3){var I8d=$6ep.getY()+$6ep.getH();om3.setY(I8d)};domapi.snap.q33=function($6ep,om3){var S30=$6ep.getX()+$6ep.getW();om3.setX(S30)};domapi.snap.$hc=function($6ep,om3){var U90=$6ep.getX();om3.setX(U90-om3.getW())};