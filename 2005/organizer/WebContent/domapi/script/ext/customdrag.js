/*
Copyright (c) Nebiru Software 2001, 2005
  Compressed and obfuscated by JSCruncher Pro.
  http://domapi.com/jscruncherpro
*/
domapi.customDrag={P$0:{},inDrag:false,dragThreshold:4,Olm1c:false,elm:null,container:null,button:"left",cursorStartX:0,cursorStartY:0,cursorX:0,cursorY:0,c93:false,doAllowSorting:true,insertAbove:false,insertBelow:false};domapi.customDrag.preloadImages=function(){var L4k17=this.P$0;var p=domapi.theme.skin._93Dq+"drag/";L4k17["nope" ]=new Image();L4k17["nope" ].src=p+"nope.gif";L4k17["text" ]=new Image();L4k17["text" ].src=p+"text.gif";L4k17["single" ]=new Image();L4k17["single" ].src=p+"single.gif";L4k17["multiple"]=new Image();L4k17["multiple"].src=p+"multiple.gif";L4k17["insert" ]=new Image();L4k17["insert" ].src=p+"insert.gif"};domapi.customDrag.preloadImages();domapi.customDrag.Gk8HS=function(){$0h(this.P$0);this.lTopJ=null;this.U8903=null};domapi.elmProto.turnOnCustomDrag=function(i2T25){if(!domapi.customDrag.c93)domapi.customDrag.hS9M7();domapi.VQ7(i2T25,"threshold",4);domapi.customDrag.container=this;this.l150b=function(E){domapi.customDrag.M4447(E,i2T25)};this.Vw$$8=domapi.rVal(this.Vw$$8,"text");domapi.addEvent(this,"mousedown",this.l150b)};domapi.elmProto.turnOffCustomDrag=function(){domapi.removeEvent(this,"mousedown",this.l150b);customDrag.inDrag=false};domapi.elmProto.cancelCustomDrag=function(){var t=domapi.customDrag;t.inDrag=false;domapi.removeEvent(document,"mousemove",t.j9s_3);domapi.removeEvent(document,"mouseup",t.N3j9e);t.h1S7g();if(t.container.ondragcancel)t.container.ondragcancel({})};domapi.customDrag.w08yY=function(){if(this.container.Vw$$8=="none")return;this.U8903.src=this.P$0[this.container.Vw$$8].src;this.U8903.bringToFront();this.U8903.show();this.d83()};domapi.customDrag.d83=function(){var m=domapi.theme.skin.metrics.drag;this.U8903.moveTo(this.cursorX+m.CM8J,this.cursorY+m.h48)};domapi.customDrag.h1S7g=function(){this.U8903.hide()};domapi.customDrag.os_KL=function(yt0,_8xC){if(!_8xC)return null;if(_8xC.ondropallow&&_8xC.ondropallow(yt0))return _8xC;return this.os_KL(yt0,_8xC.parentNode)};domapi.customDrag.hS9M7=function(){this.U8903=domapi.Elm({type:"IMG",x:0,y:0,w:domapi.theme.skin.metrics.drag.h8Lc,h:domapi.theme.skin.metrics.drag.BJ24p});domapi.customDrag.U8903.hide()};domapi.customDrag.M4447=function(E,i2T25){domapi.preventBubble(E);var t=domapi.customDrag;var x3A00=domapi.getTarget(E);try{var FnP34=false;t.container=null;while(x3A00&&!FnP34){FnP34=(!x3A00.inDrag&&x3A00.doAllowDrag);if(!FnP34)x3A00=x3A00.parentNode}if(!FnP34||!x3A00)return;t.container=x3A00;if(!t.container.doAllowDrag||t.inDrag)return;for(var i in i2T25)t[i]=i2T25[i];if(domapi.isGecko)E.preventDefault();t.dragThreshold=i2T25["threshold"];t.Olm1c=false;t.elm=domapi.getTarget(E);if(domapi.isIE){switch(event.button){case 1:t.button="left";break;case 2:t.button="right";break;case 3:t.button="middle";break}}else{switch(E.which){case 1:t.button="left";break;case 2:t.button="middle";break;case 3:t.button="right";break}}t.inDrag=true;t.cursorStartX=domapi.isIE?event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft:E.clientX+window.scrollX;t.cursorStartY=domapi.isIE?event.clientY+document.documentElement.scrollTop+document.body.scrollTop:E.clientY+window.scrollY;domapi.addEvent(document,"mousemove",t.j9s_3);domapi.addEvent(document,"mouseup",t.N3j9e);var yt0={};yt0["E"]=domapi.isGecko?E:event;yt0["cursorX"]=t.cursorStartX;yt0["cursorY"]=t.cursorStartY;if(t.container.ondragallow&&!t.container.ondragallow(yt0))t.container.cancelCustomDrag({})}finally{x3A00=null;yt0=null}};domapi.customDrag.j9s_3=function(E){domapi.preventBubble(E);var t=domapi.customDrag;if(domapi.isGecko){t.cursorX=E.clientX+window.scrollX;t.cursorY=E.clientY+window.scrollY}else{t.cursorX=event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft;t.cursorY=event.clientY+document.documentElement.scrollTop+document.body.scrollTop}var dX=t.cursorX-t.cursorStartX;var dY=t.cursorY-t.cursorStartY;var yt0={};try{yt0["E" ]=domapi.isGecko?E:event;yt0["over" ]=domapi.getTarget(E);yt0["source" ]=t.elm;yt0["cursorX"]=t.cursorX;yt0["dX"]=dX;yt0["cursorY"]=t.cursorY;yt0["dY"]=dY;if(t.doAllowSorting){var h=yt0["over"].offsetHeight;var iS_=domapi.getTrueOffset(yt0["over"]);var y=t.cursorY-iS_[1];var B26=parseInt((y/h)*100);t.insertAbove=(B26<=20);t.insertBelow=(B26>=80);if(t.insertAbove&&t.container.onallowinsertabove)t.insertAbove=t.container.onallowinsertabove(yt0);else t.insertAbove=false;if(t.insertBelow&&t.container.onallowinsertbelow)t.insertBelow=t.container.onallowinsertbelow(yt0);else t.insertBelow=false}if(!t.Olm1c)if((Math.abs(dX)>t.dragThreshold)||(Math.abs(dY)>t.dragThreshold)){t.Olm1c=true;if(t.container.ondragstart)t.container.ondragstart(yt0);t.w08yY()}if(t.Olm1c&&t.inDrag){if(t.container.ondragmove)t.container.ondragmove(yt0);var _8xC=domapi.getTarget(E);_8xC=t.os_KL(yt0,_8xC);var U8903=_8xC?t.container.Vw$$8:"nope";if(U8903!="none"){var src=t.P$0[U8903].src;if(t.insertAbove||t.insertBelow)src=t.P$0["insert"].src;if(t.U8903.src!=src)t.U8903.src=src;t.d83()}return}}finally{yt0=null;t=null;_8xC=null}};domapi.customDrag.N3j9e=function(E){domapi.preventBubble(E);var t=domapi.customDrag;var yt0={};try{yt0["E" ]=domapi.isGecko?E:event;yt0["over" ]=domapi.getTarget(E);yt0["source"]=t.elm;if(t.Olm1c){var _8xC=domapi.getTarget(E);_8xC=t.os_KL(yt0,_8xC)}if(!t.Olm1c)t.container.cancelCustomDrag({});yt0["target"]=_8xC;yt0["source"]=t.elm;t.inDrag=false;t.h1S7g();domapi.removeEvent(document,"mousemove",t.j9s_3);domapi.removeEvent(document,"mouseup",t.N3j9e);if(t.container.ondragend)t.container.ondragend(yt0);if(_8xC&&_8xC.ondrop)_8xC.ondrop(yt0);if(t.container.draw)t.container.draw()}finally{yt0=null;_8xC=null}};