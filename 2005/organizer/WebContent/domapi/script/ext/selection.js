/*
Copyright (c) Nebiru Software 2001, 2005
  Compressed and obfuscated by JSCruncher Pro.
  http://domapi.com/jscruncherpro
*/
domapi.loadUnit("keyboard");domapi.loadUnit("groups");domapi.selection={};domapi.selection.elms=null;domapi.selection.allowed=null;domapi.selection.controls={};domapi.selection.Gj3P1=[];domapi.selection.Gj3P1[0]='leftTop';domapi.selection.Gj3P1[1]='centreTop';domapi.selection.Gj3P1[2]='rightTop';domapi.selection.Gj3P1[3]='rightMiddle';domapi.selection.Gj3P1[4]='rightBottom';domapi.selection.Gj3P1[5]='centreBottom';domapi.selection.Gj3P1[6]='leftBottom';domapi.selection.Gj3P1[7]='leftMiddle';domapi.selection.eDXn=function(x3A00){var c=x3A00.selection.controls;l=domapi.selection.Gj3P1;for(var i=0;i<8;i++){if((typeof domapi.selection.controls.gtMw!='object')||(domapi.selection.controls.gtMw[i]!=null)){c[i]=domapi.Elm({x:0,y:0});c[i].DA_TYPE="control";c[i].bringToFront()}else{c[i]=null}}};domapi.selection.L9fJ4=function(x3A00){var c=x3A00.selection.controls;for(var a=0;a<c.length;a++){if(c[a]){c[a].setW(domapi.selection.controls.size);c[a].setH(domapi.selection.controls.size);c[a].setBgColor(domapi.selection.controls.color);c[a].parent=x3A00;if(typeof domapi.selection.controls.gtMw=="object"&&typeof domapi.selection.controls.gtMw[a]=='string'){c[a].innerHTML='<img src="'+domapi.selection.controls.gtMw[a]+'" width='+(domapi.selection.controls.size)+' height='+(domapi.selection.controls.size)+'>'}else{c[a].innerHTML=''}}}};domapi.selection.k69S=function k69S(x3A00){if((!x3A00.xwg10)||((domapi.selection.c37)&&(x3A00.BBv)))return;var size=domapi.selection.controls.size;var bv8=domapi.selection.controls.bv8;var c=x3A00.selection.controls;var trueOffset=domapi.getTrueOffset(x3A00);var x=trueOffset[0];var y=trueOffset[1];if(x3A00.getW){if(c[0]){c[0].setX(x-bv8,true);c[0].setY(y-bv8,true)};if(c[1]){c[1].setX(x+(x3A00.getW()/2)-(size/2),true);c[1].setY(y-bv8,true)};if(c[2]){c[2].setX(x+x3A00.getW()-size+bv8,true);c[2].setY(y-bv8,true)};if(c[3]){c[3].setX(x+x3A00.getW()-size+bv8,true);c[3].setY(y+(x3A00.getH()/2)-(size/2),true)};if(c[4]){c[4].setX(x+x3A00.getW()-size+bv8,true);c[4].setY(y+x3A00.getH()-size+bv8,true)};if(c[5]){c[5].setX(x+(x3A00.getW()/2)-(size/2),true);c[5].setY(y+x3A00.getH()-size+bv8,true)};if(c[6]){c[6].setX(x-bv8,true);c[6].setY(y+x3A00.getH()-size+bv8,true)};if(c[7]){c[7].setX(x-bv8,true);c[7].setY(y+(x3A00.getH()/2)-(size/2),true)}}else{for(var a=0;a<8;a++)if(c[a])c[a].setY(-10)}};domapi.selection.on=function(){if(domapi.selection.status)return;domapi.selection.elms=[];domapi.addEvent(document,"click",domapi.selection.Ln5);domapi.selection.status=true};domapi.selection.off=function(){O_x4=domapi.selection;domapi.removeEvent(document,"click",O_x4.vv4S);O_x4.elms=null;domapi.selection.status=false};domapi.selection.setControls=function(deselectOnDrag,size,color,bv8,gtMw){var O_x4=domapi.selection;var U6Wo=domapi.elmProto;O_x4.deselectOnDrag=domapi.rVal(deselectOnDrag,O_x4.deselectOnDrag);if(O_x4.deselectOnDrag!=null){if(O_x4.deselectOnDrag==true){if(O_x4.deselectOnDragOn==false){O_x4.deselectOnDragOn=true;domapi.unRegHook('dragStart',O_x4.mPR);domapi.regHook('dragStart',O_x4.rV1)}}else if(O_x4.deselectOnDrag==false){if(O_x4.deselectOnDragOn==true){O_x4.deselectOnDragOn=false;domapi.unRegHook('dragStart',O_x4.rV1);domapi.regHook('dragStart',O_x4.mPR)}}}var w$3=domapi.selection.controls;w$3.size=domapi.rInt(size,w$3.size);if((bv8==null)&&(!w$3.size%2))w$3.size++;w$3.bv8=domapi.rInt(bv8,(w$3.size+1)/2);w$3.color=domapi.rVal(color,w$3.color);if(gtMw!=null)w$3.gtMw=(typeof gtMw=="string")?new Array(gtMw,gtMw,gtMw,gtMw,gtMw,gtMw,gtMw,gtMw):gtMw};domapi.selection.rV1=function(x3A00){domapi.selection.f92(x3A00);x3A00.BBv=true};domapi.selection.mPR=function(x3A00){x3A00.BBv=true};domapi.selection.l$f4p=function(x3A00,elm){var p=x3A00.parentNode;if(!p.DA_TYPE)return false;if(!p.N06)p.N06=[];p.N06[p.N06.length]=elm;domapi.selection.l$f4p(p,elm)};domapi.selection.OiY61=function(x3A00,elm){var p=x3A00.parentNode;if(!p.DA_TYPE)return false;if(p.N06)p.N06.deleteItem(p.N06.indexOf(elm));domapi.selection.OiY61(p,elm)};domapi.selection.y1U=function(x3A00){if(!x3A00.N06)return;for(var i=0;i<x3A00.N06.length;i++){domapi.selection.k69S(x3A00.N06[i]);domapi.selection.y1U(x3A00.N06[i])}};domapi.selection._1o=function(x3A00){if(typeof x3A00.bringToFront!="undefined")x3A00.bringToFront();var O_x4=domapi.selection;x3A00.selection={};var H8vU$=x3A00.selection;H8vU$.controls=[];x3A00.xwg10='init';O_x4.eDXn(x3A00);O_x4.L9fJ4(x3A00);if(x3A00.resizeStatus)domapi.resize._1o(x3A00);O_x4.k69S(x3A00);domapi.selection.l$f4p(x3A00,x3A00);x3A00.xwg10=true;O_x4.elms[O_x4.elms.length]=x3A00;if(O_x4.onselected)O_x4.onselected(x3A00)};domapi.selection.f92=function(x3A00){if(!x3A00.xwg10)return;var c=x3A00.selection.controls;var O_x4=domapi.selection;for(var a=0;a<c.length;a++){if(c[a])c[a].removeNode(true)}x3A00.xwg10=false;if(x3A00.resizeStatus)domapi.resize.f92(x3A00);O_x4.OiY61(x3A00,x3A00);delete x3A00.selection.controls;O_x4.elms.deleteItem(O_x4.elms.indexOf(x3A00));if(O_x4.ondeselected)O_x4.ondeselected(x3A00)};domapi.selection.F365=function(){var i;var elms=domapi.selection.elms;for(i=elms.length-1;i>=0;i--)domapi.selection.f92(elms[i])};domapi.selection._C5=function(nF9vw){if(nF9vw==null){return null}else if(nF9vw.DA_TYPE){if((domapi.selection.J8o(nF9vw))&&(nF9vw.DA_TYPE!='control'))return nF9vw;else return "notAllowed"}else if((nF9vw.nodeName!='HTML')&&(nF9vw.nodeName!='BODY')&&(nF9vw.parentNode.nodeName!='BODY')){return domapi.selection._C5(nF9vw.parentNode)}else{return null}};domapi.selection.J8o=function(nF9vw){var a=domapi.selection.allowed;if(!a){return true}else{for(var i=0;i<a.length;i++){if(a[i]==nF9vw){return true}else if(domapi.groups.groupExists(a[i])){if(nF9vw.isInGroup(a[i])){return true}}}return false}};domapi.selection.addAllowed=function(){for(var i=0;i<arguments.length;i++){nF9vw=arguments[i];if(!nF9vw.DA_TYPE&&!domapi.groups.groupExists(nF9vw))return;if(!domapi.selection.allowed){domapi.selection.allowed=[]}domapi.selection.allowed.push(nF9vw)}};domapi.selection.ly51G=function(){var a=domapi.selection.allowed;if(!a)return;for(var i=0;i<arguments.length;i++){nF9vw=arguments[i];a.deleteItem(a.indexOf(nF9vw))}};domapi.selection.Ln5=function(x3A00){O_x4=domapi.selection;var select=O_x4._C5(domapi.getTarget(x3A00));if(select=="notAllowed")return;if(select){if(select.BBv){select.BBv=false;return}if(!O_x4.elms)O_x4.elms=[];var index=O_x4.elms.indexOf(select);if(!domapi.keyboard.DoRT()){O_x4.F365();O_x4.elms=[];domapi.regHook('setX',domapi.selection.k69S);domapi.regHook('setX',domapi.selection.y1U);domapi.regHook('setY',domapi.selection.k69S);domapi.regHook('setY',domapi.selection.y1U);domapi.regHook('setW',domapi.selection.k69S);domapi.regHook('setH',domapi.selection.k69S);if(index!=-1)return}if(index==-1)O_x4._1o(select);else O_x4.f92(select)}else{O_x4=domapi.selection;if(O_x4.elms){O_x4.F365();O_x4.elms=null;if(domapi.selection.onclearselection)domapi.selection.onclearselection();domapi.unRegHook('setX',domapi.selection.k69S);domapi.unRegHook('setX',domapi.selection.y1U);domapi.unRegHook('setY',domapi.selection.k69S);domapi.unRegHook('setY',domapi.selection.y1U);domapi.unRegHook('setW',domapi.selection.k69S);domapi.unRegHook('setH',domapi.selection.k69S)}return}};domapi.selection.on();domapi.selection.deselectOnDragOn=false;domapi.selection.setControls(true,5,"green");domapi.elmProto.xwg10=false;